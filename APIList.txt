ProductController
    1. Get Products - Done
    2. Add a Product - Done
    3. Get one Product - Done
    4. Rate Product - Done
    5. Filter Products - Done
    6. Add items to cart - Done
    7. Get items of cart - Done
    8. Delete items from cart - Done

UserController
    1. Signup - Email, Name, Password, TypeOfUser(customer, seller) - Done
    2. Signin - Email, Password - Done

Location: BEwNJSA_Week2_Lecture2

Steps for modifying _id:
    1. Create Counter Collection (_id: "cartItemId", value: 0)
    2. While adding cart item, increment the counter, and hen use counter value as the id to cart item document


db.products.aggregate([
    //stage1 create documents for ratings
    {
        $unwind: "$ratings"
    },
    //stage2 group rating per product & get average
    {
        $group: {
            _id: "$name",
            averageRating: {$avg: "$ratings.rating"}
        }
    }
])



3rd Insight:

db.products.aggregate([
    {
        $project: {name:1, countOfRating: {
            $cond: {if: {$isArray: "$ratings"},
            then: {$size: "$ratings"}, else: 0}}
        }
    }
])




4th insight: product with max no. of ratings:

db.products.aggregate([
    {
        $project: {name:1, countOfRating: {
            $cond: {if: {$isArray: "$ratings"},
            then: {$size: "$ratings"}, else: 0}}
        }
    },
    {
        $sort: {countOfRating: -1}
    }
])




5h insight: limit to just 1 item in result

db.products.aggregate([
    {
        $project: {name:1, countOfRating: {
            $cond: {if: {$isArray: "$ratings"},
            then: {$size: "$ratings"}, else: 0}}
        }
    },
    {
        $sort: {countOfRating: -1}
    },
    {
        $limit: 1
    }
])